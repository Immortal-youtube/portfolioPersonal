{"ast":null,"code":"import { HttpRequest } from \"@aws-sdk/protocol-http\";\nimport { SPACE, UA_ESCAPE_REGEX, USER_AGENT, X_AMZ_USER_AGENT } from \"./constants\";\nexport const userAgentMiddleware = options => (next, context) => async args => {\n  const {\n    request\n  } = args;\n  if (!HttpRequest.isInstance(request)) return next(args);\n  const {\n    headers\n  } = request;\n  const userAgent = context?.userAgent?.map(escapeUserAgent) || [];\n  const defaultUserAgent = (await options.defaultUserAgentProvider()).map(escapeUserAgent);\n  const customUserAgent = options?.customUserAgent?.map(escapeUserAgent) || [];\n  const sdkUserAgentValue = [...defaultUserAgent, ...userAgent, ...customUserAgent].join(SPACE);\n  const normalUAValue = [...defaultUserAgent.filter(section => section.startsWith(\"aws-sdk-\")), ...customUserAgent].join(SPACE);\n\n  if (options.runtime !== \"browser\") {\n    if (normalUAValue) {\n      headers[X_AMZ_USER_AGENT] = headers[X_AMZ_USER_AGENT] ? `${headers[USER_AGENT]} ${normalUAValue}` : normalUAValue;\n    }\n\n    headers[USER_AGENT] = sdkUserAgentValue;\n  } else {\n    headers[X_AMZ_USER_AGENT] = sdkUserAgentValue;\n  }\n\n  return next({ ...args,\n    request\n  });\n};\n\nconst escapeUserAgent = _ref => {\n  let [name, version] = _ref;\n  const prefixSeparatorIndex = name.indexOf(\"/\");\n  const prefix = name.substring(0, prefixSeparatorIndex);\n  let uaName = name.substring(prefixSeparatorIndex + 1);\n\n  if (prefix === \"api\") {\n    uaName = uaName.toLowerCase();\n  }\n\n  return [prefix, uaName, version].filter(item => item && item.length > 0).map(item => item?.replace(UA_ESCAPE_REGEX, \"_\")).join(\"/\");\n};\n\nexport const getUserAgentMiddlewareOptions = {\n  name: \"getUserAgentMiddleware\",\n  step: \"build\",\n  priority: \"low\",\n  tags: [\"SET_USER_AGENT\", \"USER_AGENT\"],\n  override: true\n};\nexport const getUserAgentPlugin = config => ({\n  applyToStack: clientStack => {\n    clientStack.add(userAgentMiddleware(config), getUserAgentMiddlewareOptions);\n  }\n});","map":{"version":3,"names":["HttpRequest","SPACE","UA_ESCAPE_REGEX","USER_AGENT","X_AMZ_USER_AGENT","userAgentMiddleware","options","next","context","args","request","isInstance","headers","userAgent","map","escapeUserAgent","defaultUserAgent","defaultUserAgentProvider","customUserAgent","sdkUserAgentValue","join","normalUAValue","filter","section","startsWith","runtime","name","version","prefixSeparatorIndex","indexOf","prefix","substring","uaName","toLowerCase","item","length","replace","getUserAgentMiddlewareOptions","step","priority","tags","override","getUserAgentPlugin","config","applyToStack","clientStack","add"],"sources":["C:/Users/anshs/OneDrive/Documents/Code/WebDevelopement/portfolioPersonal/node_modules/@aws-sdk/middleware-user-agent/dist-es/user-agent-middleware.js"],"sourcesContent":["import { HttpRequest } from \"@aws-sdk/protocol-http\";\nimport { SPACE, UA_ESCAPE_REGEX, USER_AGENT, X_AMZ_USER_AGENT } from \"./constants\";\nexport const userAgentMiddleware = (options) => (next, context) => async (args) => {\n    const { request } = args;\n    if (!HttpRequest.isInstance(request))\n        return next(args);\n    const { headers } = request;\n    const userAgent = context?.userAgent?.map(escapeUserAgent) || [];\n    const defaultUserAgent = (await options.defaultUserAgentProvider()).map(escapeUserAgent);\n    const customUserAgent = options?.customUserAgent?.map(escapeUserAgent) || [];\n    const sdkUserAgentValue = [...defaultUserAgent, ...userAgent, ...customUserAgent].join(SPACE);\n    const normalUAValue = [\n        ...defaultUserAgent.filter((section) => section.startsWith(\"aws-sdk-\")),\n        ...customUserAgent,\n    ].join(SPACE);\n    if (options.runtime !== \"browser\") {\n        if (normalUAValue) {\n            headers[X_AMZ_USER_AGENT] = headers[X_AMZ_USER_AGENT]\n                ? `${headers[USER_AGENT]} ${normalUAValue}`\n                : normalUAValue;\n        }\n        headers[USER_AGENT] = sdkUserAgentValue;\n    }\n    else {\n        headers[X_AMZ_USER_AGENT] = sdkUserAgentValue;\n    }\n    return next({\n        ...args,\n        request,\n    });\n};\nconst escapeUserAgent = ([name, version]) => {\n    const prefixSeparatorIndex = name.indexOf(\"/\");\n    const prefix = name.substring(0, prefixSeparatorIndex);\n    let uaName = name.substring(prefixSeparatorIndex + 1);\n    if (prefix === \"api\") {\n        uaName = uaName.toLowerCase();\n    }\n    return [prefix, uaName, version]\n        .filter((item) => item && item.length > 0)\n        .map((item) => item?.replace(UA_ESCAPE_REGEX, \"_\"))\n        .join(\"/\");\n};\nexport const getUserAgentMiddlewareOptions = {\n    name: \"getUserAgentMiddleware\",\n    step: \"build\",\n    priority: \"low\",\n    tags: [\"SET_USER_AGENT\", \"USER_AGENT\"],\n    override: true,\n};\nexport const getUserAgentPlugin = (config) => ({\n    applyToStack: (clientStack) => {\n        clientStack.add(userAgentMiddleware(config), getUserAgentMiddlewareOptions);\n    },\n});\n"],"mappings":"AAAA,SAASA,WAAT,QAA4B,wBAA5B;AACA,SAASC,KAAT,EAAgBC,eAAhB,EAAiCC,UAAjC,EAA6CC,gBAA7C,QAAqE,aAArE;AACA,OAAO,MAAMC,mBAAmB,GAAIC,OAAD,IAAa,CAACC,IAAD,EAAOC,OAAP,KAAmB,MAAOC,IAAP,IAAgB;EAC/E,MAAM;IAAEC;EAAF,IAAcD,IAApB;EACA,IAAI,CAACT,WAAW,CAACW,UAAZ,CAAuBD,OAAvB,CAAL,EACI,OAAOH,IAAI,CAACE,IAAD,CAAX;EACJ,MAAM;IAAEG;EAAF,IAAcF,OAApB;EACA,MAAMG,SAAS,GAAGL,OAAO,EAAEK,SAAT,EAAoBC,GAApB,CAAwBC,eAAxB,KAA4C,EAA9D;EACA,MAAMC,gBAAgB,GAAG,CAAC,MAAMV,OAAO,CAACW,wBAAR,EAAP,EAA2CH,GAA3C,CAA+CC,eAA/C,CAAzB;EACA,MAAMG,eAAe,GAAGZ,OAAO,EAAEY,eAAT,EAA0BJ,GAA1B,CAA8BC,eAA9B,KAAkD,EAA1E;EACA,MAAMI,iBAAiB,GAAG,CAAC,GAAGH,gBAAJ,EAAsB,GAAGH,SAAzB,EAAoC,GAAGK,eAAvC,EAAwDE,IAAxD,CAA6DnB,KAA7D,CAA1B;EACA,MAAMoB,aAAa,GAAG,CAClB,GAAGL,gBAAgB,CAACM,MAAjB,CAAyBC,OAAD,IAAaA,OAAO,CAACC,UAAR,CAAmB,UAAnB,CAArC,CADe,EAElB,GAAGN,eAFe,EAGpBE,IAHoB,CAGfnB,KAHe,CAAtB;;EAIA,IAAIK,OAAO,CAACmB,OAAR,KAAoB,SAAxB,EAAmC;IAC/B,IAAIJ,aAAJ,EAAmB;MACfT,OAAO,CAACR,gBAAD,CAAP,GAA4BQ,OAAO,CAACR,gBAAD,CAAP,GACrB,GAAEQ,OAAO,CAACT,UAAD,CAAa,IAAGkB,aAAc,EADlB,GAEtBA,aAFN;IAGH;;IACDT,OAAO,CAACT,UAAD,CAAP,GAAsBgB,iBAAtB;EACH,CAPD,MAQK;IACDP,OAAO,CAACR,gBAAD,CAAP,GAA4Be,iBAA5B;EACH;;EACD,OAAOZ,IAAI,CAAC,EACR,GAAGE,IADK;IAERC;EAFQ,CAAD,CAAX;AAIH,CA5BM;;AA6BP,MAAMK,eAAe,GAAG,QAAqB;EAAA,IAApB,CAACW,IAAD,EAAOC,OAAP,CAAoB;EACzC,MAAMC,oBAAoB,GAAGF,IAAI,CAACG,OAAL,CAAa,GAAb,CAA7B;EACA,MAAMC,MAAM,GAAGJ,IAAI,CAACK,SAAL,CAAe,CAAf,EAAkBH,oBAAlB,CAAf;EACA,IAAII,MAAM,GAAGN,IAAI,CAACK,SAAL,CAAeH,oBAAoB,GAAG,CAAtC,CAAb;;EACA,IAAIE,MAAM,KAAK,KAAf,EAAsB;IAClBE,MAAM,GAAGA,MAAM,CAACC,WAAP,EAAT;EACH;;EACD,OAAO,CAACH,MAAD,EAASE,MAAT,EAAiBL,OAAjB,EACFL,MADE,CACMY,IAAD,IAAUA,IAAI,IAAIA,IAAI,CAACC,MAAL,GAAc,CADrC,EAEFrB,GAFE,CAEGoB,IAAD,IAAUA,IAAI,EAAEE,OAAN,CAAclC,eAAd,EAA+B,GAA/B,CAFZ,EAGFkB,IAHE,CAGG,GAHH,CAAP;AAIH,CAXD;;AAYA,OAAO,MAAMiB,6BAA6B,GAAG;EACzCX,IAAI,EAAE,wBADmC;EAEzCY,IAAI,EAAE,OAFmC;EAGzCC,QAAQ,EAAE,KAH+B;EAIzCC,IAAI,EAAE,CAAC,gBAAD,EAAmB,YAAnB,CAJmC;EAKzCC,QAAQ,EAAE;AAL+B,CAAtC;AAOP,OAAO,MAAMC,kBAAkB,GAAIC,MAAD,KAAa;EAC3CC,YAAY,EAAGC,WAAD,IAAiB;IAC3BA,WAAW,CAACC,GAAZ,CAAgBzC,mBAAmB,CAACsC,MAAD,CAAnC,EAA6CN,6BAA7C;EACH;AAH0C,CAAb,CAA3B"},"metadata":{},"sourceType":"module"}