{"ast":null,"code":"import { RETRY_MODES } from \"./config\";\nimport { DefaultRateLimiter } from \"./DefaultRateLimiter\";\nimport { StandardRetryStrategy } from \"./StandardRetryStrategy\";\nexport class AdaptiveRetryStrategy {\n  constructor(maxAttemptsProvider, options) {\n    this.maxAttemptsProvider = maxAttemptsProvider;\n    this.mode = RETRY_MODES.ADAPTIVE;\n    const {\n      rateLimiter\n    } = options ?? {};\n    this.rateLimiter = rateLimiter ?? new DefaultRateLimiter();\n    this.standardRetryStrategy = new StandardRetryStrategy(maxAttemptsProvider);\n  }\n\n  async acquireInitialRetryToken(retryTokenScope) {\n    await this.rateLimiter.getSendToken();\n    return this.standardRetryStrategy.acquireInitialRetryToken(retryTokenScope);\n  }\n\n  async refreshRetryTokenForRetry(tokenToRenew, errorInfo) {\n    this.rateLimiter.updateClientSendingRate(errorInfo);\n    return this.standardRetryStrategy.refreshRetryTokenForRetry(tokenToRenew, errorInfo);\n  }\n\n  recordSuccess(token) {\n    this.rateLimiter.updateClientSendingRate({});\n    this.standardRetryStrategy.recordSuccess(token);\n  }\n\n}","map":{"version":3,"names":["RETRY_MODES","DefaultRateLimiter","StandardRetryStrategy","AdaptiveRetryStrategy","constructor","maxAttemptsProvider","options","mode","ADAPTIVE","rateLimiter","standardRetryStrategy","acquireInitialRetryToken","retryTokenScope","getSendToken","refreshRetryTokenForRetry","tokenToRenew","errorInfo","updateClientSendingRate","recordSuccess","token"],"sources":["C:/Users/anshs/OneDrive/Documents/Code/WebDevelopement/portfolioPersonal/node_modules/@aws-sdk/util-retry/dist-es/AdaptiveRetryStrategy.js"],"sourcesContent":["import { RETRY_MODES } from \"./config\";\nimport { DefaultRateLimiter } from \"./DefaultRateLimiter\";\nimport { StandardRetryStrategy } from \"./StandardRetryStrategy\";\nexport class AdaptiveRetryStrategy {\n    constructor(maxAttemptsProvider, options) {\n        this.maxAttemptsProvider = maxAttemptsProvider;\n        this.mode = RETRY_MODES.ADAPTIVE;\n        const { rateLimiter } = options ?? {};\n        this.rateLimiter = rateLimiter ?? new DefaultRateLimiter();\n        this.standardRetryStrategy = new StandardRetryStrategy(maxAttemptsProvider);\n    }\n    async acquireInitialRetryToken(retryTokenScope) {\n        await this.rateLimiter.getSendToken();\n        return this.standardRetryStrategy.acquireInitialRetryToken(retryTokenScope);\n    }\n    async refreshRetryTokenForRetry(tokenToRenew, errorInfo) {\n        this.rateLimiter.updateClientSendingRate(errorInfo);\n        return this.standardRetryStrategy.refreshRetryTokenForRetry(tokenToRenew, errorInfo);\n    }\n    recordSuccess(token) {\n        this.rateLimiter.updateClientSendingRate({});\n        this.standardRetryStrategy.recordSuccess(token);\n    }\n}\n"],"mappings":"AAAA,SAASA,WAAT,QAA4B,UAA5B;AACA,SAASC,kBAAT,QAAmC,sBAAnC;AACA,SAASC,qBAAT,QAAsC,yBAAtC;AACA,OAAO,MAAMC,qBAAN,CAA4B;EAC/BC,WAAW,CAACC,mBAAD,EAAsBC,OAAtB,EAA+B;IACtC,KAAKD,mBAAL,GAA2BA,mBAA3B;IACA,KAAKE,IAAL,GAAYP,WAAW,CAACQ,QAAxB;IACA,MAAM;MAAEC;IAAF,IAAkBH,OAAO,IAAI,EAAnC;IACA,KAAKG,WAAL,GAAmBA,WAAW,IAAI,IAAIR,kBAAJ,EAAlC;IACA,KAAKS,qBAAL,GAA6B,IAAIR,qBAAJ,CAA0BG,mBAA1B,CAA7B;EACH;;EAC6B,MAAxBM,wBAAwB,CAACC,eAAD,EAAkB;IAC5C,MAAM,KAAKH,WAAL,CAAiBI,YAAjB,EAAN;IACA,OAAO,KAAKH,qBAAL,CAA2BC,wBAA3B,CAAoDC,eAApD,CAAP;EACH;;EAC8B,MAAzBE,yBAAyB,CAACC,YAAD,EAAeC,SAAf,EAA0B;IACrD,KAAKP,WAAL,CAAiBQ,uBAAjB,CAAyCD,SAAzC;IACA,OAAO,KAAKN,qBAAL,CAA2BI,yBAA3B,CAAqDC,YAArD,EAAmEC,SAAnE,CAAP;EACH;;EACDE,aAAa,CAACC,KAAD,EAAQ;IACjB,KAAKV,WAAL,CAAiBQ,uBAAjB,CAAyC,EAAzC;IACA,KAAKP,qBAAL,CAA2BQ,aAA3B,CAAyCC,KAAzC;EACH;;AAnB8B"},"metadata":{},"sourceType":"module"}