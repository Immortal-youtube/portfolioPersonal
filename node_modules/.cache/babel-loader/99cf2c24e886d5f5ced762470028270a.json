{"ast":null,"code":"import { DefaultRateLimiter, RETRY_MODES } from \"@aws-sdk/util-retry\";\nimport { StandardRetryStrategy } from \"./StandardRetryStrategy\";\nexport class AdaptiveRetryStrategy extends StandardRetryStrategy {\n  constructor(maxAttemptsProvider, options) {\n    const {\n      rateLimiter,\n      ...superOptions\n    } = options ?? {};\n    super(maxAttemptsProvider, superOptions);\n    this.rateLimiter = rateLimiter ?? new DefaultRateLimiter();\n    this.mode = RETRY_MODES.ADAPTIVE;\n  }\n\n  async retry(next, args) {\n    return super.retry(next, args, {\n      beforeRequest: async () => {\n        return this.rateLimiter.getSendToken();\n      },\n      afterRequest: response => {\n        this.rateLimiter.updateClientSendingRate(response);\n      }\n    });\n  }\n\n}","map":{"version":3,"names":["DefaultRateLimiter","RETRY_MODES","StandardRetryStrategy","AdaptiveRetryStrategy","constructor","maxAttemptsProvider","options","rateLimiter","superOptions","mode","ADAPTIVE","retry","next","args","beforeRequest","getSendToken","afterRequest","response","updateClientSendingRate"],"sources":["C:/Users/anshs/OneDrive/Documents/Code/WebDevelopement/portfolioPersonal/node_modules/@aws-sdk/middleware-retry/dist-es/AdaptiveRetryStrategy.js"],"sourcesContent":["import { DefaultRateLimiter, RETRY_MODES } from \"@aws-sdk/util-retry\";\nimport { StandardRetryStrategy } from \"./StandardRetryStrategy\";\nexport class AdaptiveRetryStrategy extends StandardRetryStrategy {\n    constructor(maxAttemptsProvider, options) {\n        const { rateLimiter, ...superOptions } = options ?? {};\n        super(maxAttemptsProvider, superOptions);\n        this.rateLimiter = rateLimiter ?? new DefaultRateLimiter();\n        this.mode = RETRY_MODES.ADAPTIVE;\n    }\n    async retry(next, args) {\n        return super.retry(next, args, {\n            beforeRequest: async () => {\n                return this.rateLimiter.getSendToken();\n            },\n            afterRequest: (response) => {\n                this.rateLimiter.updateClientSendingRate(response);\n            },\n        });\n    }\n}\n"],"mappings":"AAAA,SAASA,kBAAT,EAA6BC,WAA7B,QAAgD,qBAAhD;AACA,SAASC,qBAAT,QAAsC,yBAAtC;AACA,OAAO,MAAMC,qBAAN,SAAoCD,qBAApC,CAA0D;EAC7DE,WAAW,CAACC,mBAAD,EAAsBC,OAAtB,EAA+B;IACtC,MAAM;MAAEC,WAAF;MAAe,GAAGC;IAAlB,IAAmCF,OAAO,IAAI,EAApD;IACA,MAAMD,mBAAN,EAA2BG,YAA3B;IACA,KAAKD,WAAL,GAAmBA,WAAW,IAAI,IAAIP,kBAAJ,EAAlC;IACA,KAAKS,IAAL,GAAYR,WAAW,CAACS,QAAxB;EACH;;EACU,MAALC,KAAK,CAACC,IAAD,EAAOC,IAAP,EAAa;IACpB,OAAO,MAAMF,KAAN,CAAYC,IAAZ,EAAkBC,IAAlB,EAAwB;MAC3BC,aAAa,EAAE,YAAY;QACvB,OAAO,KAAKP,WAAL,CAAiBQ,YAAjB,EAAP;MACH,CAH0B;MAI3BC,YAAY,EAAGC,QAAD,IAAc;QACxB,KAAKV,WAAL,CAAiBW,uBAAjB,CAAyCD,QAAzC;MACH;IAN0B,CAAxB,CAAP;EAQH;;AAhB4D"},"metadata":{},"sourceType":"module"}