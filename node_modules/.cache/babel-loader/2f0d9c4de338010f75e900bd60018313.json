{"ast":null,"code":"import { fromBase64 } from \"@aws-sdk/util-base64\";\nexport const streamCollector = stream => {\n  if (typeof Blob === \"function\" && stream instanceof Blob) {\n    return collectBlob(stream);\n  }\n\n  return collectStream(stream);\n};\n\nasync function collectBlob(blob) {\n  const base64 = await readToBase64(blob);\n  const arrayBuffer = fromBase64(base64);\n  return new Uint8Array(arrayBuffer);\n}\n\nasync function collectStream(stream) {\n  let res = new Uint8Array(0);\n  const reader = stream.getReader();\n  let isDone = false;\n\n  while (!isDone) {\n    const {\n      done,\n      value\n    } = await reader.read();\n\n    if (value) {\n      const prior = res;\n      res = new Uint8Array(prior.length + value.length);\n      res.set(prior);\n      res.set(value, prior.length);\n    }\n\n    isDone = done;\n  }\n\n  return res;\n}\n\nfunction readToBase64(blob) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.onloadend = () => {\n      if (reader.readyState !== 2) {\n        return reject(new Error(\"Reader aborted too early\"));\n      }\n\n      const result = reader.result ?? \"\";\n      const commaIndex = result.indexOf(\",\");\n      const dataOffset = commaIndex > -1 ? commaIndex + 1 : result.length;\n      resolve(result.substring(dataOffset));\n    };\n\n    reader.onabort = () => reject(new Error(\"Read aborted\"));\n\n    reader.onerror = () => reject(reader.error);\n\n    reader.readAsDataURL(blob);\n  });\n}","map":{"version":3,"names":["fromBase64","streamCollector","stream","Blob","collectBlob","collectStream","blob","base64","readToBase64","arrayBuffer","Uint8Array","res","reader","getReader","isDone","done","value","read","prior","length","set","Promise","resolve","reject","FileReader","onloadend","readyState","Error","result","commaIndex","indexOf","dataOffset","substring","onabort","onerror","error","readAsDataURL"],"sources":["C:/Users/anshs/OneDrive/Documents/Code/WebDevelopement/portfolioPersonal/node_modules/@aws-sdk/fetch-http-handler/dist-es/stream-collector.js"],"sourcesContent":["import { fromBase64 } from \"@aws-sdk/util-base64\";\nexport const streamCollector = (stream) => {\n    if (typeof Blob === \"function\" && stream instanceof Blob) {\n        return collectBlob(stream);\n    }\n    return collectStream(stream);\n};\nasync function collectBlob(blob) {\n    const base64 = await readToBase64(blob);\n    const arrayBuffer = fromBase64(base64);\n    return new Uint8Array(arrayBuffer);\n}\nasync function collectStream(stream) {\n    let res = new Uint8Array(0);\n    const reader = stream.getReader();\n    let isDone = false;\n    while (!isDone) {\n        const { done, value } = await reader.read();\n        if (value) {\n            const prior = res;\n            res = new Uint8Array(prior.length + value.length);\n            res.set(prior);\n            res.set(value, prior.length);\n        }\n        isDone = done;\n    }\n    return res;\n}\nfunction readToBase64(blob) {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n            if (reader.readyState !== 2) {\n                return reject(new Error(\"Reader aborted too early\"));\n            }\n            const result = (reader.result ?? \"\");\n            const commaIndex = result.indexOf(\",\");\n            const dataOffset = commaIndex > -1 ? commaIndex + 1 : result.length;\n            resolve(result.substring(dataOffset));\n        };\n        reader.onabort = () => reject(new Error(\"Read aborted\"));\n        reader.onerror = () => reject(reader.error);\n        reader.readAsDataURL(blob);\n    });\n}\n"],"mappings":"AAAA,SAASA,UAAT,QAA2B,sBAA3B;AACA,OAAO,MAAMC,eAAe,GAAIC,MAAD,IAAY;EACvC,IAAI,OAAOC,IAAP,KAAgB,UAAhB,IAA8BD,MAAM,YAAYC,IAApD,EAA0D;IACtD,OAAOC,WAAW,CAACF,MAAD,CAAlB;EACH;;EACD,OAAOG,aAAa,CAACH,MAAD,CAApB;AACH,CALM;;AAMP,eAAeE,WAAf,CAA2BE,IAA3B,EAAiC;EAC7B,MAAMC,MAAM,GAAG,MAAMC,YAAY,CAACF,IAAD,CAAjC;EACA,MAAMG,WAAW,GAAGT,UAAU,CAACO,MAAD,CAA9B;EACA,OAAO,IAAIG,UAAJ,CAAeD,WAAf,CAAP;AACH;;AACD,eAAeJ,aAAf,CAA6BH,MAA7B,EAAqC;EACjC,IAAIS,GAAG,GAAG,IAAID,UAAJ,CAAe,CAAf,CAAV;EACA,MAAME,MAAM,GAAGV,MAAM,CAACW,SAAP,EAAf;EACA,IAAIC,MAAM,GAAG,KAAb;;EACA,OAAO,CAACA,MAAR,EAAgB;IACZ,MAAM;MAAEC,IAAF;MAAQC;IAAR,IAAkB,MAAMJ,MAAM,CAACK,IAAP,EAA9B;;IACA,IAAID,KAAJ,EAAW;MACP,MAAME,KAAK,GAAGP,GAAd;MACAA,GAAG,GAAG,IAAID,UAAJ,CAAeQ,KAAK,CAACC,MAAN,GAAeH,KAAK,CAACG,MAApC,CAAN;MACAR,GAAG,CAACS,GAAJ,CAAQF,KAAR;MACAP,GAAG,CAACS,GAAJ,CAAQJ,KAAR,EAAeE,KAAK,CAACC,MAArB;IACH;;IACDL,MAAM,GAAGC,IAAT;EACH;;EACD,OAAOJ,GAAP;AACH;;AACD,SAASH,YAAT,CAAsBF,IAAtB,EAA4B;EACxB,OAAO,IAAIe,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;IACpC,MAAMX,MAAM,GAAG,IAAIY,UAAJ,EAAf;;IACAZ,MAAM,CAACa,SAAP,GAAmB,MAAM;MACrB,IAAIb,MAAM,CAACc,UAAP,KAAsB,CAA1B,EAA6B;QACzB,OAAOH,MAAM,CAAC,IAAII,KAAJ,CAAU,0BAAV,CAAD,CAAb;MACH;;MACD,MAAMC,MAAM,GAAIhB,MAAM,CAACgB,MAAP,IAAiB,EAAjC;MACA,MAAMC,UAAU,GAAGD,MAAM,CAACE,OAAP,CAAe,GAAf,CAAnB;MACA,MAAMC,UAAU,GAAGF,UAAU,GAAG,CAAC,CAAd,GAAkBA,UAAU,GAAG,CAA/B,GAAmCD,MAAM,CAACT,MAA7D;MACAG,OAAO,CAACM,MAAM,CAACI,SAAP,CAAiBD,UAAjB,CAAD,CAAP;IACH,CARD;;IASAnB,MAAM,CAACqB,OAAP,GAAiB,MAAMV,MAAM,CAAC,IAAII,KAAJ,CAAU,cAAV,CAAD,CAA7B;;IACAf,MAAM,CAACsB,OAAP,GAAiB,MAAMX,MAAM,CAACX,MAAM,CAACuB,KAAR,CAA7B;;IACAvB,MAAM,CAACwB,aAAP,CAAqB9B,IAArB;EACH,CAdM,CAAP;AAeH"},"metadata":{},"sourceType":"module"}