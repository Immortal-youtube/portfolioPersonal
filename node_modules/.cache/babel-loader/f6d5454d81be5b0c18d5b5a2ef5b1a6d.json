{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Plain = void 0;\n\nconst bson_1 = require(\"../../bson\");\n\nconst error_1 = require(\"../../error\");\n\nconst utils_1 = require(\"../../utils\");\n\nconst auth_provider_1 = require(\"./auth_provider\");\n\nclass Plain extends auth_provider_1.AuthProvider {\n  auth(authContext, callback) {\n    const {\n      connection,\n      credentials\n    } = authContext;\n\n    if (!credentials) {\n      return callback(new error_1.MongoMissingCredentialsError('AuthContext must provide credentials.'));\n    }\n\n    const username = credentials.username;\n    const password = credentials.password;\n    const payload = new bson_1.Binary(Buffer.from(`\\x00${username}\\x00${password}`));\n    const command = {\n      saslStart: 1,\n      mechanism: 'PLAIN',\n      payload: payload,\n      autoAuthorize: 1\n    };\n    connection.command((0, utils_1.ns)('$external.$cmd'), command, undefined, callback);\n  }\n\n}\n\nexports.Plain = Plain;","map":{"version":3,"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA,MAAaA,KAAb,SAA2BC,4BAA3B,CAAuC;EAC5BC,IAAI,CAACC,WAAD,EAA2BC,QAA3B,EAA6C;IACxD,MAAM;MAAEC,UAAF;MAAcC;IAAd,IAA8BH,WAApC;;IACA,IAAI,CAACG,WAAL,EAAkB;MAChB,OAAOF,QAAQ,CAAC,IAAIG,oCAAJ,CAAiC,uCAAjC,CAAD,CAAf;IACD;;IACD,MAAMC,QAAQ,GAAGF,WAAW,CAACE,QAA7B;IACA,MAAMC,QAAQ,GAAGH,WAAW,CAACG,QAA7B;IAEA,MAAMC,OAAO,GAAG,IAAIC,aAAJ,CAAWC,MAAM,CAACC,IAAP,CAAY,OAAOL,QAAQ,OAAOC,QAAQ,EAA1C,CAAX,CAAhB;IACA,MAAMK,OAAO,GAAG;MACdC,SAAS,EAAE,CADG;MAEdC,SAAS,EAAE,OAFG;MAGdN,OAAO,EAAEA,OAHK;MAIdO,aAAa,EAAE;IAJD,CAAhB;IAOAZ,UAAU,CAACS,OAAX,CAAmB,gBAAG,gBAAH,CAAnB,EAAyCA,OAAzC,EAAkDI,SAAlD,EAA6Dd,QAA7D;EACD;;AAlBoC;;AAAvCe","names":["Plain","auth_provider_1","auth","authContext","callback","connection","credentials","error_1","username","password","payload","bson_1","Buffer","from","command","saslStart","mechanism","autoAuthorize","undefined","exports"],"sources":["C:\\Users\\anshs\\OneDrive\\Documents\\Code\\WebDevelopement\\portfolioPersonal\\node_modules\\mongodb\\src\\cmap\\auth\\plain.ts"],"sourcesContent":["import { Binary } from '../../bson';\nimport { MongoMissingCredentialsError } from '../../error';\nimport { Callback, ns } from '../../utils';\nimport { AuthContext, AuthProvider } from './auth_provider';\n\nexport class Plain extends AuthProvider {\n  override auth(authContext: AuthContext, callback: Callback): void {\n    const { connection, credentials } = authContext;\n    if (!credentials) {\n      return callback(new MongoMissingCredentialsError('AuthContext must provide credentials.'));\n    }\n    const username = credentials.username;\n    const password = credentials.password;\n\n    const payload = new Binary(Buffer.from(`\\x00${username}\\x00${password}`));\n    const command = {\n      saslStart: 1,\n      mechanism: 'PLAIN',\n      payload: payload,\n      autoAuthorize: 1\n    };\n\n    connection.command(ns('$external.$cmd'), command, undefined, callback);\n  }\n}\n"]},"metadata":{},"sourceType":"script"}